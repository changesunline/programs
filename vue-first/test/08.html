<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>计数器使用$emit</title>
    <script type="text/javascript" src="vue.js"></script>
</head>

<body>
    <div id="root">
       <counter :count="0" @change="handleChange"></counter>
       <counter :count="0" @change="handleChange"></counter>
       <h2>{{total}}</h2>
	</div>
    <script type="text/javascript">
    	// 局部组件
	    var counter = {
	    	props: ["count"],
	    	template: `<h2 @click="handleClick">{{number}}</h2>`,
	    	data: function () {
	    		return {
	    			number: this.count
	    		}
	    	},
	    	methods: {
	    		handleClick: function () {
	    			this.number += 2
	    			this.$emit('change',2)
	    		}
	    	}
	    }

	    var vm = new Vue({
	        el: "#root",
	        components: {
	        	counter: counter
	        },
	        data: {
	        	total: 0
	        },
	        methods: {
	        	handleChange: function (step) {
	        		console.log(step)
	        		this.total += step
	        	}
	        }
	    })
	</script>
</body>

</html>